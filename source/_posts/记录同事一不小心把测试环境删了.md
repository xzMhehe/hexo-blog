---
title: 记录同事一不小心把测试环境删了
date: 2021-09-09 18:57:13
tags: [面试]
categories: [面试]
keywords: [面试]
description: 一面
copyright: false
---

>对于误删这个问题，想必大家多熟知的就是生产环境的删库。现实情况中，误删现象在测试环境上也多有出现，只不过是影响范围没有生产环境误删那么的严重，在比较之下，大家对于测试环境误删的事件就没有那么的重视。但是，由于测试环境误删所引发的蝴蝶效应也是很严重的。

前不久，有位同学在测试环境中执行 `rm -rf /xx` 操作，删除了一台测试虚拟机上的运行环境，这个环境平时大多用于大家的联调测试和客户演示用的。尽管误操作发生后，及时采取了一些补救措施，但是对于一些研发人员和客户还是受到了不同程度的影响。恢复环境一共花费了一天的时间，在这一天里基本所有的联调测试任务全部中断停滞。



## 针对此次问题的解决方案
针对测试环境问题的解决方法可以从技术上、规范上两个方面入手，但是倾向技术方案解决为主，规范方案解决为辅，减少人工干预以及人为操作带来的失误。

- 预防被删以便快速恢复实例，定期备份和快照。

- 回收 root 权限，改写 `rm -rf` 命令，实际上执行的是 `mv xx`，相当于增加一个 `回收站` 功能。

- 数据库操作权限分层分级（权限管理）


最后说一下备份数据：备份方式常用全量备份和增量备份的方式。备份的策略包括跨机器、跨机房、跨区备份。数据是企业第一生产力，数据备份尤其重要。














原文链接：https://blog.csdn.net/qq6759/article/details/105646883







